# Custom Analytics Connector and Entitlement Engine

EMPPlayer has a smooth integration with EMPAnalytics. 
However if the customer wishes to change the Analytics integration, that is possible to achieve by replacing EMPAnalyticsConnector for a new one.
A AnalyticsConnector is a component responsible for making a bridge between the events generated by the player and the correspondent analytics service.

EMPPlayer also has a smooth integration with EMP backend by providing an implementation of a Exposure-specific EntitlementEngine (by default).
However, that is possible to change aswell if the customer wants to have a custom Entitlement Engine.
In this scenario, importing the libraries with Exposure integration makes no sense and increses the artifact's size. 
For theses cases we provide a **lightweight** playback library. To include it just replace the dependency on gradle:

```gradle
compile "com.github.EricssonBroadcastServices:AndroidClientPlayback:r2.72.0"
```

by

```gradle
compile "com.github.EricssonBroadcastServices:AndroidClientPlayback:r2.72.0-light"
```

``NOTE:`` the UI helpers available in the standard version of the library are not present in its lightweight version.

The EMPPlayer instance is instanciated throught a **EntitlementPlayerFactory**:

```java
EMPPlayer player = EntitlementPlayerFactory.build(entitlementProvider, analyticsConnector, myActivity, myView);
```  

- ``analyticsConnector`` is an instance of a class that extends **AnalyticsPlaybackConnector**;
- ``entitlementProvider`` is an instance of a class that implements **IEntitlementProvider** interface
- ``myActivity`` is the activity using the player
- ``myView`` is the reference to the player's wrapper View (must extend ViewGroup)

**IEntitlementProvider** methods receive a **IEntitlementCallback** which is called back when the entitlement is ready, passing it as an argument of the **onEntitlement** method.
If an error occurs, onError is called instead.

