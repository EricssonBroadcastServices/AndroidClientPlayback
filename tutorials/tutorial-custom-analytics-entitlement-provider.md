# Custom Analytics Connector and Entitlement Engine

The EMPPlayer has a smooth integration with EMPAnalytics. However, it is possible to change the Analytics integration by replacing EMPAnalyticsConnector with a new one. The AnalyticsConnector is a component responsible for making a bridge between the events generated by the player and the corresponding analytics service.

The EMPPlayer also has a smooth integration with EMP backend by providing an implementation of an Exposure-specific EntitlementEngine (by default). However, this can be changed as well if you want to have a custom Entitlement Engine.
In this scenario, importing the libraries with Exposure integration makes no sense and increses the artifact's size. 
For theses cases we provide a **lightweight** playback library. To include it just replace the dependency on gradle:

```gradle
compile "com.github.EricssonBroadcastServices:AndroidClientPlayback:r2.72.0"
```

by

```gradle
compile "com.github.EricssonBroadcastServices:AndroidClientPlayback:r2.72.0-light"
```

``NOTE:`` the UI helpers available in the standard version of the library are not present in its lightweight version.

The EMPPlayer instance is instanciated through the **EntitlementPlayerFactory**:

```java
EMPPlayer player = EntitlementPlayerFactory.build(entitlementProvider, analyticsConnector, myActivity, myView);
```  

- ``analyticsConnector`` is an instance of a class that extends **AnalyticsPlaybackConnector**;
- ``entitlementProvider`` is an instance of a class that implements **IEntitlementProvider** interface
- ``myActivity`` is the activity that uses the player
- ``myView`` is the reference to the players wrapper View (must extend ViewGroup)

**IEntitlementProvider** methods receive an **IEntitlementCallback** which is called when the entitlement is ready, passing it as an argument for the **onEntitlement** method.
If an error occurs, onError is called instead.

